!function(e){const{config:t,translation:n}=e,s=document.querySelector(".searchbox"),r=s.querySelector(".searchbox-input"),o=s.querySelector(".searchbox-body");function c(e,t,n){if(!Array.isArray(t)||!t.length||!e)return n?e.slice(0,n):e;const s=e.toLowerCase(),r=t.map((e=>{const t=s.indexOf(e.toLowerCase());return e&&-1!==t?[t,t+e.length]:null})).filter((e=>null!==e)).sort(((e,t)=>e[0]-t[0]||e[1]-t[1]));if(!r.length)return e;let o="",c=0;const a=function(e){let t;const n=[];return e.forEach((e=>{!t||e[0]>t[1]?n.push(t=e):e[1]>t[1]&&(t[1]=e[1])})),n}(r),i=[a[0][0],a[a.length-1][1]];n&&n<i[1]&&(c=i[0]);for(let t=0;t<a.length;t++){const s=a[t];if(o+=e.slice(c,Math.min(s[0],i[0]+n)),n&&s[0]>=i[0]+n)break;o+="<em>"+e.slice(s[0],s[1])+"</em>",c=s[1],t===a.length-1&&(o+=n?e.slice(s[1],Math.min(e.length,i[0]+n+1)):e.slice(s[1]))}return o}function a(e,t,s,r,o){t=null!=t&&""!==t?t:n.untitled;const c=[];switch(e){case"file":c.push('<svg xmlns="http://www.w3.org/2000/svg" height="16" width="12" viewBox="0 0 384 512">','<path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"/>',"</svg>");break;case"folder":c.push('<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512">','<path d="M464 128H272l-64-64H48C21.5 64 0 85.5 0 112v288c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V176c0-26.5-21.5-48-48-48z" />',"</svg>");break;case"tag":c.push('<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512">','<path d="M0 252.1V48C0 21.5 21.5 0 48 0h204.1a48 48 0 0 1 33.9 14.1l211.9 211.9c18.7 18.7 18.7 49.1 0 67.9L293.8 497.9c-18.7 18.7-49.1 18.7-67.9 0L14.1 286.1A48 48 0 0 1 0 252.1zM112 64c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z"/>',"</svg>")}return[`<a class="searchbox-result-item" href="${o}">`,""+(c.length>0?'<span class="searchbox-result-icon">'+c.join("")+"</span>":""),'<span class="searchbox-result-content">',`<span class="searchbox-result-title">${t}</span>`,""+(r?'<span class="searchbox-result-preview">'+r+"</span>":""),"</span>","</a>"].join("")}function i(e,t,n){if(0===n.length)return null;switch(t){case"POSTS":case"PAGES":return n.map((t=>a("file",c(t.title,e),0,c(t.text,e,100),t.link)));case"CATEGORIES":case"TAGS":return n.map((n=>{const s=c(n.name,e);c(n.slug,e);return a("CATEGORIES"===t?"folder":"tag",s,0,null,n.link)}))}return null}function l(e){return e.split(" ").filter((e=>!!e)).map((e=>e.toLowerCase()))}function u(e,t,n){const s=l(e);return s.filter((e=>n.filter((n=>!!Object.prototype.hasOwnProperty.call(t,n)&&t[n].toLowerCase().indexOf(e)>-1)).length>0)).length===s.length}function h(e,t,n,s){let r=0;return l(e).forEach((e=>{const o=new RegExp(e,"img");n.forEach(((e,n)=>{if(Object.prototype.hasOwnProperty.call(t,e)){const c=t[e].match(o);r+=c?c.length*s[n]:0}}))})),r}function g(e,t){const n=function(e){return{post:function(t){return h(e,t,["title","text"],[3,1])},page:function(t){return h(e,t,["title","text"],[3,1])},category:function(t){return h(e,t,["name","slug"],[1,1])},tag:function(t){return h(e,t,["name","slug"],[1,1])}}}(t),s=function(e){return{post:function(t){return u(e,t,["title","text"])},page:function(t){return u(e,t,["title","text"])},category:function(t){return u(e,t,["name","slug"])},tag:function(t){return u(e,t,["name","slug"])}}}(t),r=e.posts,o=e.pages,c=e.tags,a=e.categories;return{posts:r.filter(s.post).sort(((e,t)=>n.post(t)-n.post(e))).slice(0,5),pages:o.filter(s.page).sort(((e,t)=>n.page(t)-n.page(e))).slice(0,5),categories:a.filter(s.category).sort(((e,t)=>n.category(t)-n.category(e))).slice(0,5),tags:c.filter(s.tag).sort(((e,t)=>n.tag(t)-n.tag(e))).slice(0,5)}}function p(e){const t=o.querySelectorAll(".searchbox-result-item");let n=-1;t.forEach(((e,t)=>{e.classList.contains("active")&&(n=t)})),n>-1&&t.item(n).classList.remove("active");const s=(t.length+n+e)%t.length;t.item(s).classList.add("active"),t.item(s).scrollIntoView(!1)}const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(4!==d.readyState||200!==d.status)return;"#insight-search"===location.hash.trim()&&s.classList.add("show");const e=JSON.parse(d.responseText);r.addEventListener("input",(t=>{const s=t.target.value;!function(e,t){o.innerHTML="";const s=l(e);for(const e in t){const r=e.toUpperCase(),c=i(s,r,t[e]);if(null==c)continue;const a=document.createElement("section");a.classList.add("searchbox-result-section"),a.innerHTML=`<header>${n[r.toLowerCase()]}</header>${c.join("")}`,o.appendChild(a)}}(s,g(e,s))})),r.dispatchEvent(new InputEvent("input"))},d.open("GET",t.contentUrl,!0),d.send(null);let f=!1;document.querySelector(".navbar-main .search").addEventListener("click",(()=>{s.classList.add("show"),s.querySelector(".searchbox-input").focus()})),document.querySelectorAll(".searchbox-result-item").forEach((e=>{const t=e=>{location.href=e.getAttribute("href")};e.addEventListener("click",(()=>{t(e),f=!1})),e.addEventListener("touchend",(()=>{f&&(t(e),f=!1)}))})),document.querySelectorAll(".searchbox-close").forEach((e=>{const t=document.querySelectorAll(".navbar-main"),n=()=>{t.forEach((e=>{e.style.pointerEvents="none",setTimeout((()=>{e.style.pointerEvents="auto"}),400)})),s.classList.remove("show"),f=!1};e.addEventListener("click",(()=>{n()})),e.addEventListener("touchend",(()=>{f&&n()}))})),document.addEventListener("keydown",(e=>{if(s.classList.contains("show"))switch(e.code){case"Escape":s.classList.remove("show");break;case"ArrowUp":p(-1);break;case"ArrowDown":p(1);break;case"Enter":o.querySelectorAll(".searchbox-result-item.active").forEach((e=>{location.href=e.getAttribute("href")}))}})),document.addEventListener("touchstart",(()=>{f=!0})),document.addEventListener("touchmove",(()=>{f=!1}))}(window.InsightSettings);