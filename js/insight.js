function loadInsight(t,e){const n=$(".searchbox"),s=n.find(".searchbox-input"),o=n.find(".searchbox-body");function r(t,e,n){if(!Array.isArray(e)||!e.length||!t)return n?t.slice(0,n):t;const s=t.toLowerCase(),o=e.map((t=>{const e=s.indexOf(t.toLowerCase());return t&&-1!==e?[e,e+t.length]:null})).filter((t=>null!==t)).sort(((t,e)=>t[0]-e[0]||t[1]-e[1]));if(!o.length)return t;let r="",c=0;const a=function(t){let e;const n=[];return t.forEach((t=>{!e||t[0]>e[1]?n.push(e=t):t[1]>e[1]&&(e[1]=t[1])})),n}(o),i=[a[0][0],a[a.length-1][1]];n&&n<i[1]&&(c=i[0]);for(let e=0;e<a.length;e++){const s=a[e];if(r+=t.slice(c,Math.min(s[0],i[0]+n)),n&&s[0]>=i[0]+n)break;r+="<em>"+t.slice(s[0],s[1])+"</em>",c=s[1],e===a.length-1&&(r+=n?t.slice(s[1],Math.min(t.length,i[0]+n+1)):t.slice(s[1]))}return r}function c(t,n,s,o,r){n=null!=n&&""!==n?n:e.untitled;let c="";switch(t){case"file":c='<svg xmlns="http://www.w3.org/2000/svg" height="16" width="12" viewBox="0 0 384 512">\n                    <path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"/>\n                </svg>';break;case"folder":c='<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512">\n                    <path d="M464 128H272l-64-64H48C21.5 64 0 85.5 0 112v288c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V176c0-26.5-21.5-48-48-48z"/>\n                </svg>';break;case"tag":c='<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512">\n                    <path d="M0 252.1V48C0 21.5 21.5 0 48 0h204.1a48 48 0 0 1 33.9 14.1l211.9 211.9c18.7 18.7 18.7 49.1 0 67.9L293.8 497.9c-18.7 18.7-49.1 18.7-67.9 0L14.1 286.1A48 48 0 0 1 0 252.1zM112 64c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z"/>\n                </svg>'}return`<a class="searchbox-result-item" href="${r}">\n            ${c?'<span class="searchbox-result-icon">'+c+"</span>":""}\n            <span class="searchbox-result-content">\n                <span class="searchbox-result-title">${n}</span>\n                ${o?'<span class="searchbox-result-preview">'+o+"</span>":""}\n            </span>\n        </a>`}function a(t,n,s){let o;if(0===s.length)return null;const a=e[n.toLowerCase()];switch(n){case"POSTS":case"PAGES":o=s.map((e=>c("file",r(e.title,t),0,r(e.text,t,100),e.link)));break;case"CATEGORIES":case"TAGS":o=s.map((e=>{const s=r(e.name,t);r(e.slug,t);return c("CATEGORIES"===n?"folder":"tag",s,0,null,e.link)}));break;default:return null}return(i=a,$("<section>").addClass("searchbox-result-section").append($("<header>").text(i))).append(o);var i}function i(t){return t.split(" ").filter((t=>!!t)).map((t=>t.toLowerCase()))}function l(t,e,n){const s=i(t);return s.filter((t=>n.filter((n=>!!Object.prototype.hasOwnProperty.call(e,n)&&e[n].toLowerCase().indexOf(t)>-1)).length>0)).length===s.length}function h(t,e,n,s){let o=0;return i(t).forEach((t=>{const r=new RegExp(t,"img");n.forEach(((t,n)=>{if(Object.prototype.hasOwnProperty.call(e,t)){const c=e[t].match(r);o+=c?c.length*s[n]:0}}))})),o}function u(t,e){const n=function(t){return{post:function(e){return h(t,e,["title","text"],[3,1])},page:function(e){return h(t,e,["title","text"],[3,1])},category:function(e){return h(t,e,["name","slug"],[1,1])},tag:function(e){return h(t,e,["name","slug"],[1,1])}}}(e),s=function(t){return{post:function(e){return l(t,e,["title","text"])},page:function(e){return l(t,e,["title","text"])},category:function(e){return l(t,e,["name","slug"])},tag:function(e){return l(t,e,["name","slug"])}}}(e),o=t.posts,r=t.pages,c=t.tags,a=t.categories;return{posts:o.filter(s.post).sort(((t,e)=>n.post(e)-n.post(t))).slice(0,5),pages:r.filter(s.page).sort(((t,e)=>n.page(e)-n.page(t))).slice(0,5),categories:a.filter(s.category).sort(((t,e)=>n.category(e)-n.category(t))).slice(0,5),tags:c.filter(s.tag).sort(((t,e)=>n.tag(e)-n.tag(t))).slice(0,5)}}function g(t){const e=$.makeArray(o.find(".searchbox-result-item"));let n=-1;e.forEach(((t,e)=>{$(t).hasClass("active")&&(n=e)}));const s=(e.length+n+t)%e.length;$(e[n]).removeClass("active"),$(e[s]).addClass("active"),function(t){if(0===t.length)return;const e=o[0].clientHeight,n=t.position().top-o.scrollTop(),s=t[0].clientHeight+t.position().top;s>e+o.scrollTop()&&o.scrollTop(s-o[0].clientHeight),n<0&&o.scrollTop(t.position().top)}($(e[s]))}function p(t){t&&t.length&&(location.href=t.attr("href"))}$.getJSON(t.contentUrl,(t=>{"#insight-search"===location.hash.trim()&&n.addClass("show"),s.on("input",(function(){const e=$(this).val();!function(t,e){o.empty();for(const n in e)o.append(a(i(t),n.toUpperCase(),e[n]))}(e,u(t,e))})),s.trigger("input")}));let f=!1;$(document).on("click focus",".navbar-main .search",(()=>{n.addClass("show"),n.find(".searchbox-input").focus()})).on("click touchend",".searchbox-result-item",(function(t){("click"===t.type||f)&&(p($(this)),f=!1)})).on("click touchend",".searchbox-close",(t=>{("click"===t.type||f)&&($(".navbar-main").css("pointer-events","none"),setTimeout((()=>{$(".navbar-main").css("pointer-events","auto")}),400),n.removeClass("show"),f=!1)})).on("keydown",(t=>{if(n.hasClass("show"))switch(t.keyCode){case 27:n.removeClass("show");break;case 38:g(-1);break;case 40:g(1);break;case 13:p(o.find(".searchbox-result-item.active").eq(0))}})).on("touchstart",(t=>{f=!0})).on("touchmove",(t=>{f=!1}))}